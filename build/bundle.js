!function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function i(){return Object.create(null)}function l(t){t.forEach(n)}function o(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(t,e){const n=t.subscribe(e);return n.unsubscribe?()=>n.unsubscribe():n}function s(t){let e;return r(t,t=>e=t)(),e}function u(t,e,n){t.$$.on_destroy.push(r(e,n))}function d(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function h(){return g(" ")}function $(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function b(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)null==e[i]?t.removeAttribute(i):"style"===i?t.style.cssText=e[i]:n[i]&&n[i].set?t[i]=e[i]:b(t,i,e[i])}function y(t,e,n){t.classList[n?"add":"remove"](e)}let k;function x(t){k=t}const w=[],T=[],L=[],E=[],_=Promise.resolve();let M=!1;function I(t){L.push(t)}function H(){const t=new Set;do{for(;w.length;){const t=w.shift();x(t),S(t.$$)}for(;T.length;)T.pop()();for(let e=0;e<L.length;e+=1){const n=L[e];t.has(n)||(n(),t.add(n))}L.length=0}while(w.length);for(;E.length;)E.pop()();M=!1}function S(t){null!==t.fragment&&(t.update(),l(t.before_update),t.fragment&&t.fragment.p(t.ctx,t.dirty),t.dirty=[-1],t.after_update.forEach(I))}const B=new Set;let F;function O(){F={r:0,c:[],p:F}}function N(){F.r||l(F.c),F=F.p}function q(t,e){t&&t.i&&(B.delete(t),t.i(e))}function A(t,e,n,i){if(t&&t.o){if(B.has(t))return;B.add(t),F.c.push(()=>{B.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}}function D(t,e){const n={},i={},l={$$scope:1};let o=t.length;for(;o--;){const c=t[o],r=e[o];if(r){for(const t in c)t in r||(i[t]=1);for(const t in r)l[t]||(n[t]=r[t],l[t]=1);t[o]=r}else for(const t in c)l[t]=1}for(const t in i)t in n||(n[t]=void 0);return n}function V(t){t&&t.c()}function j(t,e,i){const{fragment:c,on_mount:r,on_destroy:s,after_update:u}=t.$$;c&&c.m(e,i),I(()=>{const e=r.map(n).filter(o);s?s.push(...e):l(e),t.$$.on_mount=[]}),u.forEach(I)}function P(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function U(t,e){-1===t.$$.dirty[0]&&(w.push(t),M||(M=!0,_.then(H)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function C(e,n,o,c,r,s,u=[-1]){const d=k;x(e);const a=n.props||{},f=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:r,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:i(),dirty:u};let p=!1;f.ctx=o?o(e,a,(t,n,i=n)=>(f.ctx&&r(f.ctx[t],f.ctx[t]=i)&&(f.bound[t]&&f.bound[t](i),p&&U(e,t)),n)):[],f.update(),p=!0,l(f.before_update),f.fragment=!!c&&c(f.ctx),n.target&&(n.hydrate?f.fragment&&f.fragment.l(function(t){return Array.from(t.childNodes)}(n.target)):f.fragment&&f.fragment.c(),n.intro&&q(e.$$.fragment),j(e,n.target,n.anchor),H()),x(d)}class z{$destroy(){P(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const G=[];function J(e,n=t){let i;const l=[];function o(t){if(c(e,t)&&(e=t,i)){const t=!G.length;for(let t=0;t<l.length;t+=1){const n=l[t];n[1](),G.push(n,e)}if(t){for(let t=0;t<G.length;t+=2)G[t][0](G[t+1]);G.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(c,r=t){const s=[c,r];return l.push(s),1===l.length&&(i=n(o)||t),c(e),()=>{const t=l.indexOf(s);-1!==t&&l.splice(t,1),0===l.length&&(i(),i=null)}}}}let K;const Q=Symbol("debug");function R(e){let n,i,l,o=(e[0].text||e[0].value)+"";return{c(){n=m("div"),b(n,"class","Select-Value"),b(n,"data-value",i=e[0].value),y(n,"active",e[1]),l=$(n,"click",e[3](e[0].value))},m(t,e){a(t,n,e),n.innerHTML=o},p(t,[e]){1&e&&o!==(o=(t[0].text||t[0].value)+"")&&(n.innerHTML=o),1&e&&i!==(i=t[0].value)&&b(n,"data-value",i),2&e&&y(n,"active",t[1])},i:t,o:t,d(t){t&&f(n),l()}}}function W(t,e,n){let i,{id:l}=e,{value:o}=e;const c=K[l];let r;return u(t,c,t=>n(5,i=t)),t.$set=t=>{"id"in t&&n(4,l=t.id),"value"in t&&n(0,o=t.value)},t.$$.update=()=>{33&t.$$.dirty&&n(1,r=i===o.value)},[o,r,c,function(t){return()=>c.set(t)},l]}class X extends z{constructor(t){super(),C(this,t,W,R,c,{id:4,value:0})}}function Y(t){return K?t.split(/[{}]/).map((t,e)=>e%2&&K[t]?s(K[t]):t).join(""):t}function Z(t){const e=Y(t);return K[Q].placeholdImages?"https://via.placeholder.com/350x200?text="+e:e}function tt(t,e,n){const i=t.slice();return i[4]=e[n],i}function et(t){let e,n=t[0].title+"";return{c(){e=m("h2"),b(e,"class","Select-Title")},m(t,i){a(t,e,i),e.innerHTML=n},p(t,i){1&i&&n!==(n=t[0].title+"")&&(e.innerHTML=n)},d(t){t&&f(e)}}}function nt(t){let e,n=Y(t[0].description)+"";return{c(){e=m("p"),b(e,"class","Select-Description")},m(t,i){a(t,e,i),e.innerHTML=n},p(t,i){1&i&&n!==(n=Y(t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&f(e)}}}function it(t){let e;const n=new X({props:{value:t[4],id:t[0].id}});return{c(){V(n.$$.fragment)},m(t,i){j(n,t,i),e=!0},p(t,e){const i={};1&e&&(i.value=t[4]),1&e&&(i.id=t[0].id),n.$set(i)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){A(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function lt(t){let e,n,i;return{c(){e=m("img"),e.src!==(n=Z(t[1].img))&&b(e,"src",n),b(e,"class","Select-Image"),b(e,"alt",i=t[1].text||t[1].value)},m(t,n){a(t,e,n)},p(t,l){2&l&&e.src!==(n=Z(t[1].img))&&b(e,"src",n),2&l&&i!==(i=t[1].text||t[1].value)&&b(e,"alt",i)},d(t){t&&f(e)}}}function ot(t){let e,n,i,l,o,c,r,s,u,g=t[0].title&&et(t),$=t[0].description&&nt(t),v=t[0].values,y=[];for(let e=0;e<v.length;e+=1)y[e]=it(tt(t,v,e));const k=t=>A(y[t],1,1,()=>{y[t]=null});let x=t[1]&&t[1].img&&lt(t);return{c(){e=m("div"),g&&g.c(),n=h(),$&&$.c(),i=h(),l=m("input"),c=h();for(let t=0;t<y.length;t+=1)y[t].c();r=h(),x&&x.c(),b(l,"type","hidden"),l.value=t[2],b(l,"name",o=t[0].title+t[0].id),b(e,"class","Select"),b(e,"data-id",s=t[0].id)},m(t,o){a(t,e,o),g&&g.m(e,null),d(e,n),$&&$.m(e,null),d(e,i),d(e,l),d(e,c);for(let t=0;t<y.length;t+=1)y[t].m(e,null);d(e,r),x&&x.m(e,null),u=!0},p(t,[c]){if(t[0].title?g?g.p(t,c):(g=et(t),g.c(),g.m(e,n)):g&&(g.d(1),g=null),t[0].description?$?$.p(t,c):($=nt(t),$.c(),$.m(e,i)):$&&($.d(1),$=null),(!u||4&c)&&(l.value=t[2]),(!u||1&c&&o!==(o=t[0].title+t[0].id))&&b(l,"name",o),1&c){let n;for(v=t[0].values,n=0;n<v.length;n+=1){const i=tt(t,v,n);y[n]?(y[n].p(i,c),q(y[n],1)):(y[n]=it(i),y[n].c(),q(y[n],1),y[n].m(e,r))}for(O(),n=v.length;n<y.length;n+=1)k(n);N()}t[1]&&t[1].img?x?x.p(t,c):(x=lt(t),x.c(),x.m(e,null)):x&&(x.d(1),x=null),(!u||1&c&&s!==(s=t[0].id))&&b(e,"data-id",s)},i(t){if(!u){for(let t=0;t<v.length;t+=1)q(y[t]);u=!0}},o(t){y=y.filter(Boolean);for(let t=0;t<y.length;t+=1)A(y[t]);u=!1},d(t){t&&f(e),g&&g.d(),$&&$.d(),p(y,t),x&&x.d()}}}function ct(t,e,n){let i,{block:l}=e;const o=K[l.id];let c;return u(t,o,t=>n(2,i=t)),t.$set=t=>{"block"in t&&n(0,l=t.block)},t.$$.update=()=>{5&t.$$.dirty&&n(1,c=l.values.find(t=>t.value===i))},[l,c,i,o]}class rt extends z{constructor(t){super(),C(this,t,ct,ot,c,{block:0})}}function st(t){let e,n=Y(t[0].title)+"";return{c(){e=m("label"),b(e,"for","name"),b(e,"class","Fields-InputLabel")},m(t,i){a(t,e,i),e.innerHTML=n},p(t,i){1&i&&n!==(n=Y(t[0].title)+"")&&(e.innerHTML=n)},d(t){t&&f(e)}}}function ut(n){let i,l,o,c,r,s=n[0].title&&st(n),u=[n[0].attributes,{class:"Fields-InputField"},{name:n[2]},{value:n[1]}],p={};for(let t=0;t<u.length;t+=1)p=e(p,u[t]);return{c(){i=m("div"),s&&s.c(),l=h(),o=m("input"),v(o,p),b(i,"class","Fields-Input"),b(i,"data-id",c=n[0].id),r=$(o,"input",n[3])},m(t,e){a(t,i,e),s&&s.m(i,null),d(i,l),d(i,o)},p(t,[e]){t[0].title?s?s.p(t,e):(s=st(t),s.c(),s.m(i,l)):s&&(s.d(1),s=null),v(o,D(u,[1&e&&t[0].attributes,{class:"Fields-InputField"},4&e&&{name:t[2]},2&e&&{value:t[1]}])),1&e&&c!==(c=t[0].id)&&b(i,"data-id",c)},i:t,o:t,d(t){t&&f(i),s&&s.d(),r()}}}function dt(t,e,n){let i,{blockId:l}=e,{field:o}=e;const c=`${l}-${o.id}`;return u(t,K[l+"."+o.id],t=>n(1,i=t)),t.$set=t=>{"blockId"in t&&n(4,l=t.blockId),"field"in t&&n(0,o=t.field)},[o,i,c,function(t){K[l+"."+o.id].set(t.target.value)},l]}class at extends z{constructor(t){super(),C(this,t,dt,ut,c,{blockId:4,field:0})}}function ft(t,e,n){const i=t.slice();return i[1]=e[n],i}function pt(t){let e,n=t[0].title+"";return{c(){e=m("h2"),b(e,"class","Fields-Title")},m(t,i){a(t,e,i),e.innerHTML=n},p(t,i){1&i&&n!==(n=t[0].title+"")&&(e.innerHTML=n)},d(t){t&&f(e)}}}function mt(t){let e,n=Y(t[0].description)+"";return{c(){e=m("p"),b(e,"class","Fields-Description")},m(t,i){a(t,e,i),e.innerHTML=n},p(t,i){1&i&&n!==(n=Y(t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&f(e)}}}function gt(t){let e;const n=new at({props:{blockId:t[0].id,field:t[1]}});return{c(){V(n.$$.fragment)},m(t,i){j(n,t,i),e=!0},p(t,e){const i={};1&e&&(i.blockId=t[0].id),1&e&&(i.field=t[1]),n.$set(i)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){A(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function ht(t){let e,n,i,l,o,c=t[0].title&&pt(t),r=t[0].description&&mt(t),s=t[0].fields,u=[];for(let e=0;e<s.length;e+=1)u[e]=gt(ft(t,s,e));const g=t=>A(u[t],1,1,()=>{u[t]=null});return{c(){e=m("div"),c&&c.c(),n=h(),r&&r.c(),i=h();for(let t=0;t<u.length;t+=1)u[t].c();b(e,"class","Fields"),b(e,"data-id",l=t[0].id)},m(t,l){a(t,e,l),c&&c.m(e,null),d(e,n),r&&r.m(e,null),d(e,i);for(let t=0;t<u.length;t+=1)u[t].m(e,null);o=!0},p(t,[d]){if(t[0].title?c?c.p(t,d):(c=pt(t),c.c(),c.m(e,n)):c&&(c.d(1),c=null),t[0].description?r?r.p(t,d):(r=mt(t),r.c(),r.m(e,i)):r&&(r.d(1),r=null),1&d){let n;for(s=t[0].fields,n=0;n<s.length;n+=1){const i=ft(t,s,n);u[n]?(u[n].p(i,d),q(u[n],1)):(u[n]=gt(i),u[n].c(),q(u[n],1),u[n].m(e,null))}for(O(),n=s.length;n<u.length;n+=1)g(n);N()}(!o||1&d&&l!==(l=t[0].id))&&b(e,"data-id",l)},i(t){if(!o){for(let t=0;t<s.length;t+=1)q(u[t]);o=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)A(u[t]);o=!1},d(t){t&&f(e),c&&c.d(),r&&r.d(),p(u,t)}}}function $t(t,e,n){let{block:i}=e;return t.$set=t=>{"block"in t&&n(0,i=t.block)},[i]}class bt extends z{constructor(t){super(),C(this,t,$t,ht,c,{block:0})}}function vt(t){let e,n=t[0].title+"";return{c(){e=m("h2"),b(e,"class","Image-Title")},m(t,i){a(t,e,i),e.innerHTML=n},p(t,i){1&i&&n!==(n=t[0].title+"")&&(e.innerHTML=n)},d(t){t&&f(e)}}}function yt(t){let e,n=Y(t[0].description)+"";return{c(){e=m("p"),b(e,"class","Image-Description")},m(t,i){a(t,e,i),e.innerHTML=n},p(t,i){1&i&&n!==(n=Y(t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&f(e)}}}function kt(n){let i,l,o,c,r,s=n[0].title&&vt(n),u=n[0].description&&yt(n),p=[{src:n[1]},{class:"Select-Image"},{alt:n[0].alt||n[1]},n[0].attributes],g={};for(let t=0;t<p.length;t+=1)g=e(g,p[t]);return{c(){i=m("div"),s&&s.c(),l=h(),u&&u.c(),o=h(),c=m("img"),v(c,g),b(i,"class","Image"),b(i,"data-id",r=n[0].id)},m(t,e){a(t,i,e),s&&s.m(i,null),d(i,l),u&&u.m(i,null),d(i,o),d(i,c)},p(t,[e]){t[0].title?s?s.p(t,e):(s=vt(t),s.c(),s.m(i,l)):s&&(s.d(1),s=null),t[0].description?u?u.p(t,e):(u=yt(t),u.c(),u.m(i,o)):u&&(u.d(1),u=null),v(c,D(p,[2&e&&{src:t[1]},{class:"Select-Image"},3&e&&{alt:t[0].alt||t[1]},1&e&&t[0].attributes])),1&e&&r!==(r=t[0].id)&&b(i,"data-id",r)},i:t,o:t,d(t){t&&f(i),s&&s.d(),u&&u.d()}}}function xt(t,e,n){let i,{block:l}=e;return t.$set=t=>{"block"in t&&n(0,l=t.block)},t.$$.update=()=>{1&t.$$.dirty&&n(1,i=Z(l.img))},[l,i]}class wt extends z{constructor(t){super(),C(this,t,xt,kt,c,{block:0})}}function Tt(t,e,n){const i=t.slice();return i[4]=e[n],i}function Lt(t){let e;const n=new rt({props:{block:t[4]}});return{c(){V(n.$$.fragment)},m(t,i){j(n,t,i),e=!0},p(t,e){const i={};2&e&&(i.block=t[4]),n.$set(i)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){A(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function Et(t){let e;const n=new bt({props:{block:t[4]}});return{c(){V(n.$$.fragment)},m(t,i){j(n,t,i),e=!0},p(t,e){const i={};2&e&&(i.block=t[4]),n.$set(i)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){A(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function _t(t){let e;const n=new wt({props:{block:t[4]}});return{c(){V(n.$$.fragment)},m(t,i){j(n,t,i),e=!0},p(t,e){const i={};2&e&&(i.block=t[4]),n.$set(i)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){A(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function Mt(t){let e,n,i,l,o="select"===t[4].type&&Lt(t),c="fields"===t[4].type&&Et(t),r="image"===t[4].type&&_t(t);return{c(){o&&o.c(),e=h(),c&&c.c(),n=h(),r&&r.c(),i=g("")},m(t,s){o&&o.m(t,s),a(t,e,s),c&&c.m(t,s),a(t,n,s),r&&r.m(t,s),a(t,i,s),l=!0},p(t,l){"select"===t[4].type?o?(o.p(t,l),q(o,1)):(o=Lt(t),o.c(),q(o,1),o.m(e.parentNode,e)):o&&(O(),A(o,1,1,()=>{o=null}),N()),"fields"===t[4].type?c?(c.p(t,l),q(c,1)):(c=Et(t),c.c(),q(c,1),c.m(n.parentNode,n)):c&&(O(),A(c,1,1,()=>{c=null}),N()),"image"===t[4].type?r?(r.p(t,l),q(r,1)):(r=_t(t),r.c(),q(r,1),r.m(i.parentNode,i)):r&&(O(),A(r,1,1,()=>{r=null}),N())},i(t){l||(q(o),q(c),q(r),l=!0)},o(t){A(o),A(c),A(r),l=!1},d(t){o&&o.d(t),t&&f(e),c&&c.d(t),t&&f(n),r&&r.d(t),t&&f(i)}}}function It(t){let e,n,i,l,o,c,r,s=(t[0].saveButtonText||"")+"",u=t[1],v=[];for(let e=0;e<u.length;e+=1)v[e]=Mt(Tt(t,u,e));const y=t=>A(v[t],1,1,()=>{v[t]=null});return{c(){e=m("form");for(let t=0;t<v.length;t+=1)v[t].c();n=h(),i=m("button"),l=g(s),b(i,"type","submit"),b(i,"class","SubmitButton"),b(e,"action",o=t[0].action),b(e,"method","POST"),r=$(e,"submit",t[2])},m(t,o){a(t,e,o);for(let t=0;t<v.length;t+=1)v[t].m(e,null);d(e,n),d(e,i),d(i,l),c=!0},p(t,[i]){if(2&i){let l;for(u=t[1],l=0;l<u.length;l+=1){const o=Tt(t,u,l);v[l]?(v[l].p(o,i),q(v[l],1)):(v[l]=Mt(o),v[l].c(),q(v[l],1),v[l].m(e,n))}for(O(),l=u.length;l<v.length;l+=1)y(l);N()}(!c||1&i)&&s!==(s=(t[0].saveButtonText||"")+"")&&function(t,e){e=""+e,t.data!==e&&(t.data=e)}(l,s),(!c||1&i&&o!==(o=t[0].action))&&b(e,"action",o)},i(t){if(!c){for(let t=0;t<u.length;t+=1)q(v[t]);c=!0}},o(t){v=v.filter(Boolean);for(let t=0;t<v.length;t+=1)A(v[t]);c=!1},d(t){t&&f(e),p(v,t),r()}}}function Ht(t,e,n){let{config:i}=e;!function(t,e){K=t.blocks.reduce((n,i)=>("select"===i.type&&(n[i.id]=J(i.values[0].value),n[i.id].subscribe(e),t.debug&&t.debug.logUpdates&&n[i.id].subscribe(t=>console.log(i.id+": "+t))),"fields"===i.type&&i.fields.forEach(l=>{const o=i.id+"."+l.id;n[o]=J(l.attributes&&l.attributes.value||""),n[o].subscribe(e),t.debug&&t.debug.logUpdates&&n[o].subscribe(t=>console.log(o+": "+t))}),n),{}),K[Q]=t.debug||{},K.getValues=function(t){return t.reduce((t,e)=>{if("select"===e.type){const n=s(K[e.id]),i=e.values.find(t=>t.value===n);t[e.title]=i.text||i.value}return"fields"===e.type&&(t[e.title]={},e.fields.forEach(n=>{t[e.title][n.title]=s(K[e.id+"."+n.id])})),t},{})}}(i,o);let l=[];function o(){K&&n(1,l=i.blocks.filter(t=>!t.conditions||t.conditions.reduce((t,e)=>s(K[e.id])===e.value&&t,!0)))}return o(),t.$set=t=>{"config"in t&&n(0,i=t.config)},[i,l,function(t){i.onSubmit&&(t.preventDefault(),this.checkValidity()?i.onSubmit(K.getValues(l)):this.reportValidity())}]}class St extends z{constructor(t){super(),C(this,t,Ht,It,c,{config:0})}}const Bt=["fields","select","image"];function Ft(t,e,n){if(!Bt.includes(t.type))throw new Error("Only expected blocks must be present. Unexpected block has type "+t.type);if(!t.id)throw new Error("All blocks must have ids. Block with index "+e+" dont has it");if("string"!=typeof t.id)throw new Error("Block id must be a string");if(t.id.indexOf(".")>=0)throw new Error("Block id must not include dot (.)");try{Ot(t,e,n)}catch(t){throw new Error("Blocks ids must be unique. Not unique id: "+t.message)}if("fields"===t.type)try{t.fields.forEach(Ot)}catch(t){throw new Error("Fields ids must be unique. Not unique id: "+t.message)}}function Ot(t,e,n){if(n.slice(e+1).some(({id:e})=>e===t.id))throw new Error(t.id)}window.konstruct={render(t,e){const n=document.querySelector(t);if(!n)throw new Error(`Element ${t} not present in DOM`);!function(t){t.blocks.forEach(Ft)}(e),new St({target:n,props:{config:e}})}}}();
//# sourceMappingURL=bundle.js.map
