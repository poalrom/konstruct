!function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function i(t){t.forEach(n)}function l(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){const n=t.subscribe(e);return n.unsubscribe?()=>n.unsubscribe():n}function s(t){let e;return c(t,t=>e=t)(),e}function u(t,e,n){t.$$.on_destroy.push(c(e,n))}function f(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function h(){return g(" ")}function $(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function b(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const o in e)null==e[o]?t.removeAttribute(o):"style"===o?t.style.cssText=e[o]:n[o]&&n[o].set?t[o]=e[o]:b(t,o,e[o])}function y(t,e,n){t.classList[n?"add":"remove"](e)}let k;function x(t){k=t}const w=[],T=[],L=[],E=[],_=Promise.resolve();let M=!1;function H(t){L.push(t)}function I(){const t=new Set;do{for(;w.length;){const t=w.shift();x(t),S(t.$$)}for(;T.length;)T.pop()();for(let e=0;e<L.length;e+=1){const n=L[e];t.has(n)||(n(),t.add(n))}L.length=0}while(w.length);for(;E.length;)E.pop()();M=!1}function S(t){null!==t.fragment&&(t.update(),i(t.before_update),t.fragment&&t.fragment.p(t.ctx,t.dirty),t.dirty=[-1],t.after_update.forEach(H))}const B=new Set;let F;function O(){F={r:0,c:[],p:F}}function N(){F.r||i(F.c),F=F.p}function q(t,e){t&&t.i&&(B.delete(t),t.i(e))}function A(t,e,n,o){if(t&&t.o){if(B.has(t))return;B.add(t),F.c.push(()=>{B.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function D(t,e){const n={},o={},i={$$scope:1};let l=t.length;for(;l--;){const r=t[l],c=e[l];if(c){for(const t in r)t in c||(o[t]=1);for(const t in c)i[t]||(n[t]=c[t],i[t]=1);t[l]=c}else for(const t in r)i[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}function V(t){t&&t.c()}function j(t,e,o){const{fragment:r,on_mount:c,on_destroy:s,after_update:u}=t.$$;r&&r.m(e,o),H(()=>{const e=c.map(n).filter(l);s?s.push(...e):i(e),t.$$.on_mount=[]}),u.forEach(H)}function P(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function C(t,e){-1===t.$$.dirty[0]&&(w.push(t),M||(M=!0,_.then(I)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(e,n,l,r,c,s,u=[-1]){const f=k;x(e);const a=n.props||{},d=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:o(),dirty:u};let p=!1;d.ctx=l?l(e,a,(t,n,o=n)=>(d.ctx&&c(d.ctx[t],d.ctx[t]=o)&&(d.bound[t]&&d.bound[t](o),p&&C(e,t)),n)):[],d.update(),p=!0,i(d.before_update),d.fragment=!!r&&r(d.ctx),n.target&&(n.hydrate?d.fragment&&d.fragment.l(function(t){return Array.from(t.childNodes)}(n.target)):d.fragment&&d.fragment.c(),n.intro&&q(e.$$.fragment),j(e,n.target,n.anchor),I()),x(f)}class z{$destroy(){P(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const G=[];function J(e,n=t){let o;const i=[];function l(t){if(r(e,t)&&(e=t,o)){const t=!G.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),G.push(n,e)}if(t){for(let t=0;t<G.length;t+=2)G[t][0](G[t+1]);G.length=0}}}return{set:l,update:function(t){l(t(e))},subscribe:function(r,c=t){const s=[r,c];return i.push(s),1===i.length&&(o=n(l)||t),r(e),()=>{const t=i.indexOf(s);-1!==t&&i.splice(t,1),0===i.length&&(o(),o=null)}}}}let K;const Q=Symbol("debug");function R(e){let n,o,i,l=(e[0].text||e[0].value)+"";return{c(){n=m("div"),b(n,"class","Select-Value"),b(n,"data-value",o=e[0].value),y(n,"active",e[1]),i=$(n,"click",e[3](e[0].value))},m(t,e){a(t,n,e),n.innerHTML=l},p(t,[e]){1&e&&l!==(l=(t[0].text||t[0].value)+"")&&(n.innerHTML=l),1&e&&o!==(o=t[0].value)&&b(n,"data-value",o),2&e&&y(n,"active",t[1])},i:t,o:t,d(t){t&&d(n),i()}}}function W(t,e,n){let o,{id:i}=e,{value:l}=e;const r=K[i];let c;return u(t,r,t=>n(5,o=t)),t.$set=t=>{"id"in t&&n(4,i=t.id),"value"in t&&n(0,l=t.value)},t.$$.update=()=>{33&t.$$.dirty&&n(1,c=o===l.value)},[l,c,r,function(t){return()=>r.set(t)},i]}class X extends z{constructor(t){super(),U(this,t,W,R,r,{id:4,value:0})}}function Y(t){const e=K?t.split(/[{}]/).map((t,e)=>e%2&&K[t]?s(K[t]):t).join(""):t;return K[Q].placeholdImages?"https://via.placeholder.com/350x200?text="+e:e}function Z(t,e,n){const o=t.slice();return o[4]=e[n],o}function tt(t){let e;const n=new X({props:{value:t[4],id:t[0].id}});return{c(){V(n.$$.fragment)},m(t,o){j(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.value=t[4]),1&e&&(o.id=t[0].id),n.$set(o)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){A(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function et(t){let e,n,o;return{c(){e=m("img"),e.src!==(n=Y(t[1].img))&&b(e,"src",n),b(e,"class","Select-Image"),b(e,"alt",o=t[1].text||t[1].value)},m(t,n){a(t,e,n)},p(t,i){2&i&&e.src!==(n=Y(t[1].img))&&b(e,"src",n),2&i&&o!==(o=t[1].text||t[1].value)&&b(e,"alt",o)},d(t){t&&d(e)}}}function nt(t){let e,n,o,i,l,r,c,s,u,g,$,v=t[0].title+"",y=t[0].description+"",k=t[0].values,x=[];for(let e=0;e<k.length;e+=1)x[e]=tt(Z(t,k,e));const w=t=>A(x[t],1,1,()=>{x[t]=null});let T=t[1]&&t[1].img&&et(t);return{c(){e=m("div"),n=m("h2"),o=h(),i=m("p"),l=h(),r=m("input"),s=h();for(let t=0;t<x.length;t+=1)x[t].c();u=h(),T&&T.c(),b(n,"class","Select-Title"),b(i,"class","Select-Description"),b(r,"type","hidden"),r.value=t[2],b(r,"name",c=t[0].title+t[0].id),b(e,"class","Select"),b(e,"data-id",g=t[0].id)},m(t,c){a(t,e,c),f(e,n),n.innerHTML=v,f(e,o),f(e,i),i.innerHTML=y,f(e,l),f(e,r),f(e,s);for(let t=0;t<x.length;t+=1)x[t].m(e,null);f(e,u),T&&T.m(e,null),$=!0},p(t,[o]){if((!$||1&o)&&v!==(v=t[0].title+"")&&(n.innerHTML=v),(!$||1&o)&&y!==(y=t[0].description+"")&&(i.innerHTML=y),(!$||4&o)&&(r.value=t[2]),(!$||1&o&&c!==(c=t[0].title+t[0].id))&&b(r,"name",c),1&o){let n;for(k=t[0].values,n=0;n<k.length;n+=1){const i=Z(t,k,n);x[n]?(x[n].p(i,o),q(x[n],1)):(x[n]=tt(i),x[n].c(),q(x[n],1),x[n].m(e,u))}for(O(),n=k.length;n<x.length;n+=1)w(n);N()}t[1]&&t[1].img?T?T.p(t,o):(T=et(t),T.c(),T.m(e,null)):T&&(T.d(1),T=null),(!$||1&o&&g!==(g=t[0].id))&&b(e,"data-id",g)},i(t){if(!$){for(let t=0;t<k.length;t+=1)q(x[t]);$=!0}},o(t){x=x.filter(Boolean);for(let t=0;t<x.length;t+=1)A(x[t]);$=!1},d(t){t&&d(e),p(x,t),T&&T.d()}}}function ot(t,e,n){let o,{block:i}=e;const l=K[i.id];let r;return u(t,l,t=>n(2,o=t)),t.$set=t=>{"block"in t&&n(0,i=t.block)},t.$$.update=()=>{5&t.$$.dirty&&n(1,r=i.values.find(t=>t.value===o))},[i,r,o,l]}class it extends z{constructor(t){super(),U(this,t,ot,nt,r,{block:0})}}function lt(n){let o,i,l,r,c,s=n[0].title+"",u=[n[0].attributes,{class:"Fields-InputField"},{name:n[2]},{value:n[1]}],p={};for(let t=0;t<u.length;t+=1)p=e(p,u[t]);return{c(){o=m("div"),i=m("label"),l=h(),r=m("input"),b(i,"for","name"),b(i,"class","Fields-InputLabel"),v(r,p),b(o,"class","Fields-Input"),c=$(r,"input",n[3])},m(t,e){a(t,o,e),f(o,i),i.innerHTML=s,f(o,l),f(o,r)},p(t,[e]){1&e&&s!==(s=t[0].title+"")&&(i.innerHTML=s),v(r,D(u,[1&e&&t[0].attributes,{class:"Fields-InputField"},4&e&&{name:t[2]},2&e&&{value:t[1]}]))},i:t,o:t,d(t){t&&d(o),c()}}}function rt(t,e,n){let o,{blockId:i}=e,{field:l}=e;const r=`${i}-${l.id}`,c=K[i+"."+l.id];return u(t,c,t=>n(1,o=t)),t.$set=t=>{"blockId"in t&&n(4,i=t.blockId),"field"in t&&n(0,l=t.field)},[l,o,r,function(t){c.set(t.target.value)},i]}class ct extends z{constructor(t){super(),U(this,t,rt,lt,r,{blockId:4,field:0})}}function st(t,e,n){const o=t.slice();return o[1]=e[n],o}function ut(t){let e;const n=new ct({props:{blockId:t[0].id,field:t[1]}});return{c(){V(n.$$.fragment)},m(t,o){j(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.blockId=t[0].id),1&e&&(o.field=t[1]),n.$set(o)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){A(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function ft(t){let e,n,o,i,l,r,c=t[0].title+"",s=t[0].description+"",u=t[0].fields,g=[];for(let e=0;e<u.length;e+=1)g[e]=ut(st(t,u,e));const $=t=>A(g[t],1,1,()=>{g[t]=null});return{c(){e=m("div"),n=m("h2"),o=h(),i=m("p"),l=h();for(let t=0;t<g.length;t+=1)g[t].c();b(n,"class","Fields-Header"),b(i,"class","Fields-Description"),b(e,"class","Fields")},m(t,u){a(t,e,u),f(e,n),n.innerHTML=c,f(e,o),f(e,i),i.innerHTML=s,f(e,l);for(let t=0;t<g.length;t+=1)g[t].m(e,null);r=!0},p(t,[o]){if((!r||1&o)&&c!==(c=t[0].title+"")&&(n.innerHTML=c),(!r||1&o)&&s!==(s=t[0].description+"")&&(i.innerHTML=s),1&o){let n;for(u=t[0].fields,n=0;n<u.length;n+=1){const i=st(t,u,n);g[n]?(g[n].p(i,o),q(g[n],1)):(g[n]=ut(i),g[n].c(),q(g[n],1),g[n].m(e,null))}for(O(),n=u.length;n<g.length;n+=1)$(n);N()}},i(t){if(!r){for(let t=0;t<u.length;t+=1)q(g[t]);r=!0}},o(t){g=g.filter(Boolean);for(let t=0;t<g.length;t+=1)A(g[t]);r=!1},d(t){t&&d(e),p(g,t)}}}function at(t,e,n){let{block:o}=e;return t.$set=t=>{"block"in t&&n(0,o=t.block)},[o]}class dt extends z{constructor(t){super(),U(this,t,at,ft,r,{block:0})}}function pt(n){let o,i,l,r,c,s,u=n[0].title+"",p=n[0].description+"",g=[{src:n[1]},{class:"Select-Image"},{alt:n[0].alt||n[1]},n[0].attributes],$={};for(let t=0;t<g.length;t+=1)$=e($,g[t]);return{c(){o=m("div"),i=m("h2"),l=h(),r=m("p"),c=h(),s=m("img"),b(i,"class","Image-Title"),b(r,"class","Image-Description"),v(s,$),b(o,"class","Image")},m(t,e){a(t,o,e),f(o,i),i.innerHTML=u,f(o,l),f(o,r),r.innerHTML=p,f(o,c),f(o,s)},p(t,[e]){1&e&&u!==(u=t[0].title+"")&&(i.innerHTML=u),1&e&&p!==(p=t[0].description+"")&&(r.innerHTML=p),v(s,D(g,[2&e&&{src:t[1]},{class:"Select-Image"},3&e&&{alt:t[0].alt||t[1]},1&e&&t[0].attributes]))},i:t,o:t,d(t){t&&d(o)}}}function mt(t,e,n){let o,{block:i}=e;return t.$set=t=>{"block"in t&&n(0,i=t.block)},t.$$.update=()=>{1&t.$$.dirty&&n(1,o=Y(i.img))},[i,o]}class gt extends z{constructor(t){super(),U(this,t,mt,pt,r,{block:0})}}function ht(t,e,n){const o=t.slice();return o[4]=e[n],o}function $t(t){let e;const n=new it({props:{block:t[4]}});return{c(){V(n.$$.fragment)},m(t,o){j(n,t,o),e=!0},p(t,e){const o={};2&e&&(o.block=t[4]),n.$set(o)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){A(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function bt(t){let e;const n=new dt({props:{block:t[4]}});return{c(){V(n.$$.fragment)},m(t,o){j(n,t,o),e=!0},p(t,e){const o={};2&e&&(o.block=t[4]),n.$set(o)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){A(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function vt(t){let e;const n=new gt({props:{block:t[4]}});return{c(){V(n.$$.fragment)},m(t,o){j(n,t,o),e=!0},p(t,e){const o={};2&e&&(o.block=t[4]),n.$set(o)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){A(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function yt(t){let e,n,o,i,l="select"===t[4].type&&$t(t),r="fields"===t[4].type&&bt(t),c="image"===t[4].type&&vt(t);return{c(){l&&l.c(),e=h(),r&&r.c(),n=h(),c&&c.c(),o=g("")},m(t,s){l&&l.m(t,s),a(t,e,s),r&&r.m(t,s),a(t,n,s),c&&c.m(t,s),a(t,o,s),i=!0},p(t,i){"select"===t[4].type?l?(l.p(t,i),q(l,1)):(l=$t(t),l.c(),q(l,1),l.m(e.parentNode,e)):l&&(O(),A(l,1,1,()=>{l=null}),N()),"fields"===t[4].type?r?(r.p(t,i),q(r,1)):(r=bt(t),r.c(),q(r,1),r.m(n.parentNode,n)):r&&(O(),A(r,1,1,()=>{r=null}),N()),"image"===t[4].type?c?(c.p(t,i),q(c,1)):(c=vt(t),c.c(),q(c,1),c.m(o.parentNode,o)):c&&(O(),A(c,1,1,()=>{c=null}),N())},i(t){i||(q(l),q(r),q(c),i=!0)},o(t){A(l),A(r),A(c),i=!1},d(t){l&&l.d(t),t&&d(e),r&&r.d(t),t&&d(n),c&&c.d(t),t&&d(o)}}}function kt(t){let e,n,o,i,l,r,c,s=(t[0].saveButtonText||"")+"",u=t[1],v=[];for(let e=0;e<u.length;e+=1)v[e]=yt(ht(t,u,e));const y=t=>A(v[t],1,1,()=>{v[t]=null});return{c(){e=m("form");for(let t=0;t<v.length;t+=1)v[t].c();n=h(),o=m("button"),i=g(s),b(o,"type","submit"),b(o,"class","SubmitButton"),b(e,"action",l=t[0].action),b(e,"method","POST"),c=$(e,"submit",t[2])},m(t,l){a(t,e,l);for(let t=0;t<v.length;t+=1)v[t].m(e,null);f(e,n),f(e,o),f(o,i),r=!0},p(t,[o]){if(2&o){let i;for(u=t[1],i=0;i<u.length;i+=1){const l=ht(t,u,i);v[i]?(v[i].p(l,o),q(v[i],1)):(v[i]=yt(l),v[i].c(),q(v[i],1),v[i].m(e,n))}for(O(),i=u.length;i<v.length;i+=1)y(i);N()}(!r||1&o)&&s!==(s=(t[0].saveButtonText||"")+"")&&function(t,e){e=""+e,t.data!==e&&(t.data=e)}(i,s),(!r||1&o&&l!==(l=t[0].action))&&b(e,"action",l)},i(t){if(!r){for(let t=0;t<u.length;t+=1)q(v[t]);r=!0}},o(t){v=v.filter(Boolean);for(let t=0;t<v.length;t+=1)A(v[t]);r=!1},d(t){t&&d(e),p(v,t),c()}}}function xt(t,e,n){let{config:o}=e;!function(t,e){K=t.blocks.reduce((n,o)=>("select"===o.type&&(n[o.id]=J(o.values[0].value),n[o.id].subscribe(e)),"fields"===o.type&&o.fields.forEach(i=>{const l=o.id+"."+i.id;n[l]=J(""),n[l].subscribe(e),t.debug&&t.debug.logUpdates&&n[l].subscribe(t=>console.log(l+": "+t))}),n),{}),K[Q]=t.debug||{},K.getValues=function(t){return t.reduce((t,e)=>{if("select"===e.type){const n=s(K[e.id]),o=e.values.find(t=>t.value===n);t[e.title]=o.text||o.value}return"fields"===e.type&&(t[e.title]={},e.fields.forEach(n=>{t[e.title][n.title]=s(K[e.id+"."+n.id])})),t},{})}}(o,l);let i=[];function l(){K&&n(1,i=o.blocks.filter(t=>!t.conditions||t.conditions.reduce((t,e)=>s(K[e.id])===e.value&&t,!0)))}return l(),t.$set=t=>{"config"in t&&n(0,o=t.config)},[o,i,function(t){o.onSubmit&&(t.preventDefault(),this.checkValidity()?o.onSubmit(K.getValues(i)):this.reportValidity())}]}class wt extends z{constructor(t){super(),U(this,t,xt,kt,r,{config:0})}}const Tt=["fields","select","image"];function Lt(t,e,n){if(!Tt.includes(t.type))throw new Error("Only expected blocks must be present. Unexpected block has type "+t.type);if(!t.id)throw new Error("All blocks must have ids. Block with index "+e+" dont has it");if("string"!=typeof t.id)throw new Error("Block id must be a string");if(t.id.indexOf(".")>=0)throw new Error("Block id must not include dot (.)");try{Et(t,e,n)}catch(t){throw new Error("Blocks ids must be unique. Not unique id: "+t.message)}if("fields"===t.type)try{t.fields.forEach(Et)}catch(t){throw new Error("Fields ids must be unique. Not unique id: "+t.message)}}function Et(t,e,n){if(n.slice(e+1).some(({id:e})=>e===t.id))throw new Error(t.id)}window.konstruct={render(t,e){const n=document.querySelector(t);if(!n)throw new Error(`Element ${t} not present in DOM`);!function(t){t.blocks.forEach(Lt)}(e),new wt({target:n,props:{config:e}})}}}();
//# sourceMappingURL=bundle.js.map
